<head>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
    integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous" />
</head>

<div class="row w-75 m-auto">
  <!-- Crear -->
  <div class="col-12 col-sm-3 contaienr p-5">
    <h3>Crear un archivo</h3>
    <form action="/crear">
      <div class="form-group">
        Nombre del archivo
        <input name="archivo" class="form-control" id="archivo" />
      </div>
      <div class="form-group">
        Contenido
        <textarea name="contenido" class="form-control" id="contenido" cols="30" rows="10"></textarea>
      </div>

      <button type="submit" class="btn btn-primary">Crear archivo</button>
    </form>
  </div>
  <!-- Leer -->
  <div class="col-12 col-sm-3 contaienr p-5">
    <h3>Leer un archivo</h3>
    <form action="/ver">
      <div class="form-group">
        Nombre del archivo
        <input name="archivo" class="form-control" id="archivo" />
      </div>

      <button type="submit" class="btn btn-info">Consultar archivo</button>
    </form>
  </div>
  <!-- Renombrar -->
  <div class="col-12 col-sm-3 contaienr p-5">
    <h3>Renombrar un archivo</h3>
    <form action="/renombrar">
      <div class="form-group">
        Nombre del archivo
        <input name="nombre" class="form-control" id="archivo" />
      </div>
      <div class="form-group">
        Nuevo nombre del archivo
        <input name="nuevoNombre" class="form-control" id="archivo" />
      </div>

      <button type="submit" class="btn btn-warning">Renombrar archivo</button>
    </form>
  </div>
  <!-- Eliminar -->
  <div class="col-12 col-sm-3 contaienr p-5">
    <h3>Eliminar un archivo</h3>
    <form action="/eliminar">
      <div class="form-group">
        Nombre del archivo
        <input name="archivo" class="form-control" id="archivo" />
      </div>

      <button type="submit" class="btn btn-danger">Eliminar archivo</button>
    </form>
  </div>
</div>

<script>
  // Función para mostrar mensajes de respuesta
  function mostrarRespuesta(formulario, mensaje) {
    const respuestaElement = formulario.querySelector('#crearRespuesta');
    respuestaElement.innerText = mensaje;
  }

  // Obtener el formulario de creación y agregar un event listener para manejar la respuesta
  const crearFormulario = document.getElementById('crearForm');
  crearFormulario.addEventListener('submit', async (event) => {
    event.preventDefault(); // Evitar que se envíe el formulario por defecto

    const formData = new FormData(crearFormulario); // Obtener datos del formulario
    const url = crearFormulario.getAttribute('action'); // Obtener la URL de la acción del formulario

    try {
      const response = await fetch(url, {
        method: 'POST',
        body: formData
      });

      const data = await response.text();
      mostrarRespuesta(crearFormulario, data);
    } catch (error) {
      console.error('Error:', error);
      mostrarRespuesta(crearFormulario, 'Error al realizar la operación');
    }
  });
</script>